"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[818],{4376:function(e,t,a){a.r(t),a.d(t,{default:function(){return Ee}});var n=a(3433),r=a(9439),o=a(2791),s=a(5861),l=a(4687),i=a.n(l),c="WaterRatioPanel_dailyNormaSection__lejGd",d="WaterRatioPanel_imageContainer__JcPUd",u="WaterRatioPanel_progressContainer__f0Qbe",m="WaterRatioPanel_progressTitle__Z-RzH",_="WaterRatioPanel_progressBar__dShpn",h="WaterRatioPanel_progressMarkers__+UN4R",f="WaterRatioPanel_marker__m+8sw",p="WaterRatioPanel_tick__Gwmie",v="WaterRatioPanel_addWaterBtn__mfzkw",x="WaterRatioPanel_icon__ZAI64",y="WaterRatioPanel_bottomSection__pH0C5",N=a(4420),j="DailyNorma_dailyNormaContainer__KHUio",g="DailyNorma_title__X4SZH",b="DailyNorma_normaContainer__yAGrT",w="DailyNorma_normaValue__Gd29x",M="DailyNorma_editButton__Zko6d",S=a(5667),k=a(2564),W={modal:"DailyNormaModal_modal__vJ3oF",modalContent:"DailyNormaModal_modalContent__KvIF8",navnButton:"DailyNormaModal_navnButton__YziaA",closeButton:"DailyNormaModal_closeButton__Uur27",iconClose:"DailyNormaModal_iconClose__fl1tD",h2:"DailyNormaModal_h2__JS8CC",h3:"DailyNormaModal_h3__kI5gk",h4:"DailyNormaModal_h4__BHKPZ",labelInput:"DailyNormaModal_labelInput__zcUdV",formulas:"DailyNormaModal_formulas__wR-gI",label:"DailyNormaModal_label__FhZVe",formula:"DailyNormaModal_formula__LLd2F",form:"DailyNormaModal_form__Z0uC7",radioGroup:"DailyNormaModal_radioGroup__hW-rO","radio-label":"DailyNormaModal_radio-label__j1hG2",inputWrapper:"DailyNormaModal_inputWrapper__yjnEa",radioLabel:"DailyNormaModal_radioLabel__7kCVO",bluInput:"DailyNormaModal_bluInput__QSMvJ",textarea:"DailyNormaModal_textarea__g-zaU",saveButton:"DailyNormaModal_saveButton__b6ZL2","modal-content":"DailyNormaModal_modal-content__TsjF1","radio-group":"DailyNormaModal_radio-group__CV3cj",blu:"DailyNormaModal_blu__S7if2"},C=a(5818),D=a(184),E=function(e){var t=e.setModalVisible,a=(0,o.useState)("woman"),n=(0,r.Z)(a,2),l=n[0],c=n[1],d=(0,o.useState)(0),u=(0,r.Z)(d,2),m=u[0],_=u[1],h=(0,o.useState)(0),f=(0,r.Z)(h,2),p=f[0],v=f[1],x=(0,o.useState)("0 L"),y=(0,r.Z)(x,2),j=y[0],g=y[1],b=(0,o.useState)(0),w=(0,r.Z)(b,2),M=w[0],E=w[1],T=(0,o.useRef)(null),B=(0,N.I0)();(0,o.useEffect)((function(){return Z(),window.addEventListener("resize",Z),function(){return window.removeEventListener("resize",Z)}}),[]);var Z=function(){var e=document.getElementById("infoText");e.style.height="auto",e.style.height=e.scrollHeight+"px"},L=(0,o.useCallback)((function(){var e;"woman"===l?e=.03*m+.4*p:"man"===l&&(e=.04*m+.6*p),isNaN(e)&&(e=0),g(0===e?"0 L":e.toFixed(2)+" L")}),[l,m,p]);(0,o.useEffect)((function(){var e=function(e){"Escape"===e.key&&t(!1)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[t]),(0,o.useEffect)((function(){L()}),[L]);var I=function(e){"0"===e.target.value&&(e.target.value="")},A=function(e){""===e.target.value&&(e.target.value="0")},F=function(){var e=(0,s.Z)(i().mark((function e(a){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),!((n=M)>5)){e.next=5;break}return k.Am.error("The maximum daily water intake is 5 L"),e.abrupt("return");case 5:if(0!==n){e.next=8;break}return k.Am.error("Please enter a value greater than zero"),e.abrupt("return");case 8:return e.prev=8,e.next=11,B((0,S.X7)({dailyNorma:n})).unwrap();case 11:e.sent.error||t(!1),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),alert("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.t0.message));case 18:case"end":return e.stop()}}),e,null,[[8,15]])})));return function(t){return e.apply(this,arguments)}}();return(0,D.jsx)("div",{className:W.modal,ref:T,onClick:function(e){T.current&&T.current===e.target&&t(!1)},children:(0,D.jsxs)("div",{className:W.modalContent,children:[(0,D.jsxs)("div",{className:W.navnButton,children:[(0,D.jsx)("h2",{className:W.h2,children:"My daily norma"}),(0,D.jsx)("button",{className:W.closeButton,onClick:function(){return t(!1)},children:(0,D.jsx)(C.Z,{name:"close",className:W.iconClose})})]}),(0,D.jsxs)("div",{className:W.formulas,children:[(0,D.jsxs)("p",{children:[(0,D.jsx)("span",{className:W.label,children:"For girl:"}),(0,D.jsx)("span",{className:W.formula,children:"V=(M*0.03) + (T*0.4)"})]}),(0,D.jsxs)("p",{children:[(0,D.jsx)("span",{className:W.label,children:"For man:"}),(0,D.jsx)("span",{className:W.formula,children:"V=(M*0.04) + (T*0.6)"})]})]}),(0,D.jsx)("textarea",{id:"infoText",readOnly:!0,className:W.textarea,value:"* V is the volume of the water norm in liters per day, M is your body weight, T is the time of active sports, or another type of activity commensurate in terms of loads (in the absence of these, you must set 0)"}),(0,D.jsxs)("form",{className:W.form,onSubmit:F,children:[(0,D.jsx)("h4",{className:W.h4,children:"Calculate your rate:"}),(0,D.jsxs)("div",{className:W.radioGroup,children:[(0,D.jsxs)("label",{className:W.radioLabel,children:[(0,D.jsx)("input",{type:"radio",name:"gender",value:"woman",checked:"woman"===l,onChange:function(){return c("woman")}})," For woman"]}),(0,D.jsxs)("label",{className:W.radioLabel,children:[(0,D.jsx)("input",{type:"radio",name:"gender",value:"man",checked:"man"===l,onChange:function(){return c("man")}})," For man"]})]}),(0,D.jsxs)("div",{className:W.inputWrapper,children:[(0,D.jsx)("label",{className:W.labelInput,htmlFor:"weight",children:"Your weight in kilograms:"}),(0,D.jsx)("input",{className:W.bluInput,type:"number",id:"weight",name:"weight",value:m,onChange:function(e){return _(parseFloat(e.target.value))},onFocus:I,onBlur:A})]}),(0,D.jsxs)("div",{className:W.inputWrapper,children:[(0,D.jsx)("label",{className:W.labelInput,htmlFor:"activity-time",children:"The time of active participation in sports or other activities with a high physical load in hours:"}),(0,D.jsx)("input",{className:W.bluInput,type:"number",id:"activity-time",name:"activity-time",value:p,onChange:function(e){return v(parseFloat(e.target.value))},onFocus:I,onBlur:A})]}),(0,D.jsx)("div",{children:(0,D.jsxs)("p",{children:[(0,D.jsx)("span",{children:"The required amount of water in liters per day:"}),(0,D.jsx)("span",{className:"".concat(W.blu," ").concat(W.requiredWater),children:j})]})}),(0,D.jsx)("h4",{className:W.h4,children:"Write down how much water you will drink:"}),(0,D.jsx)("div",{className:W.inputWrapper,children:(0,D.jsx)("input",{className:W.bluInput,type:"number",id:"water-intake",name:"water-intake",value:M,onChange:function(e){var t=e.target.value;/^\d*\.?\d*$/.test(t)&&E(parseFloat(t))},onFocus:I,onBlur:A})}),(0,D.jsx)("button",{type:"submit",className:W.saveButton,children:"Save"})]})]})})},T=a(4746),B=function(){var e=(0,N.I0)(),t=(0,o.useState)(!1),a=(0,r.Z)(t,2),n=a[0],l=a[1];(0,o.useEffect)((function(){e((0,S.BT)())}),[e]);var c=(0,N.v9)(T.S8),d=(null===c||void 0===c?void 0:c.data)||{},u=d.daylyNorm?d.daylyNorm/1e3:2,m=function(){var t=(0,s.Z)(i().mark((function t(a){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e((0,S.X7)({dailyNorma:1e3*a})).unwrap();case 3:t.sent&&l(!1),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Failed to update daily norma:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return(0,D.jsxs)("div",{className:j,children:[(0,D.jsx)("p",{className:g,children:"My daily norma"}),(0,D.jsxs)("div",{className:b,children:[(0,D.jsxs)("span",{className:w,children:[u," L"]}),(0,D.jsx)("button",{onClick:function(){l(!0)},className:M,children:"Edit"})]}),n&&(0,D.jsx)(E,{setModalVisible:l,handleSave:m})]})},Z=a(3930),L={modal:"AddWaterModal_modal__dUadi",modalContent:"AddWaterModal_modalContent__PCT0Q",modalHeader:"AddWaterModal_modalHeader__blV6-",headerText:"AddWaterModal_headerText__cEz7Y","modal-header":"AddWaterModal_modal-header__XGyFr",close:"AddWaterModal_close__zmKJE",modalBody:"AddWaterModal_modalBody__snhFv",amountSelector:"AddWaterModal_amountSelector__fdnLF",inputSaveContainer:"AddWaterModal_inputSaveContainer__BhJMK",inputText:"AddWaterModal_inputText__8XBA6",labelDistance:"AddWaterModal_labelDistance__1laX6",labelDistanceText:"AddWaterModal_labelDistanceText__l4fKH",saveButton:"AddWaterModal_saveButton__aM7B3",buttonSelector:"AddWaterModal_buttonSelector__B-Mvf",inputField:"AddWaterModal_inputField__6yl44"},I=function(e){var t=e.setModalVisible,a=e.onClose,n=(0,o.useState)(0),l=(0,r.Z)(n,2),c=l[0],d=l[1],u=(0,o.useState)(""),m=(0,r.Z)(u,2),_=m[0],h=m[1],f=(0,o.useState)(!0),p=(0,r.Z)(f,2),v=p[0],x=p[1],y=(0,o.useRef)(null),j=(0,N.I0)();(0,o.useEffect)((function(){var e=function(e){"Escape"===e.key&&t(!1)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[t]);var g=(0,o.useCallback)((function(){t(!1)}),[t]);(0,o.useEffect)((function(){M();var e=function(e){"Escape"===e.key&&g()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[g]);var b=function(e){d((function(t){return Math.max(0,t+e)}))},w=function(){var e=(0,s.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v){e.next=3;break}return alert("Please enter a valid amount"),e.abrupt("return");case 3:return e.prev=3,e.next=6,j((0,Z.R$)({amount:c,time:_}));case 6:t(!1),a(c,_),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),alert("Error saving record: "+e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}(),M=function(){for(var e=document.getElementById("time"),t=new Date,a=t.getHours(),n=5*Math.floor(t.getMinutes()/5),r=0;r<24;r++)for(var o=0;o<60;o+=5){var s=document.createElement("option");s.value="".concat(r.toString().padStart(2,"0"),":").concat(o.toString().padStart(2,"0")),s.textContent="".concat(r.toString().padStart(2,"0"),":").concat(o.toString().padStart(2,"0")),r===a&&o===n&&(s.selected=!0,h(s.value)),e.appendChild(s)}};return(0,D.jsx)("div",{className:L.modal,ref:y,onClick:function(e){y.current&&y.current===e.target&&g()},children:(0,D.jsxs)("div",{className:L.modalContent,children:[(0,D.jsxs)("div",{className:L.modalHeader,children:[(0,D.jsx)("h2",{className:L.headerText,children:"Add water"}),(0,D.jsx)("span",{className:L.close,onClick:g,children:(0,D.jsx)(C.Z,{name:"close",className:L.iconClose})})]}),(0,D.jsxs)("div",{className:L.modalBody,children:[(0,D.jsx)("h4",{className:L.labelDistance,htmlFor:"amount",children:"Choose a value:"}),(0,D.jsx)("label",{className:L.labelDistanceText,htmlFor:"amount",children:"Amount of water:"}),(0,D.jsxs)("div",{className:L.amountSelector,children:[(0,D.jsx)("button",{className:L.buttonSelector,onClick:function(){return b(-50)},children:"-"}),(0,D.jsxs)("span",{id:"amount",children:[c," ml"]}),(0,D.jsx)("button",{className:L.buttonSelector,onClick:function(){return b(50)},children:"+"})]}),(0,D.jsx)("label",{className:L.labelDistanceText,htmlFor:"time",children:"Recording time:"}),(0,D.jsx)("select",{className:L.inputText,id:"time",onChange:function(e){return h(e.target.value)}}),(0,D.jsx)("h4",{className:L.labelDistance,htmlFor:"value",children:"Enter the value of the water used:"}),(0,D.jsx)("input",{className:L.inputText,type:"number",id:"value",value:c,onChange:function(e){var t=e.target.value,a=/^\d*\.?\d*$/.test(t);x(a),a&&d(Number(t))},onFocus:function(e){"0"===e.target.value&&d("")},onBlur:function(e){""===e.target.value&&d(0)}}),(0,D.jsxs)("div",{className:L.inputSaveContainer,children:[(0,D.jsx)("input",{className:L.inputField,type:"text",id:"autoFillInput",readOnly:!0,value:"".concat(c," ml")}),(0,D.jsx)("button",{className:L.saveButton,onClick:w,children:"Save"})]})]})]})})},A=function(e){return e.water.recordsToday},F=function(e){var t=e.sliderValue,a=(0,o.useState)(256),n=(0,r.Z)(a,2),s=n[0],l=n[1];return(0,o.useEffect)((function(){var e=function(){window.innerWidth>=1440?l(350):window.innerWidth>=768?l(325):l(256)};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),(0,D.jsxs)("svg",{className:_,width:"100%",height:"20",viewBox:"0 0 ".concat(s," 20"),children:[(0,D.jsx)("rect",{x:"0",y:"6",width:s,height:"8",fill:"#d7e3ff",rx:"7"}),(0,D.jsx)("rect",{x:"0",y:"6",width:t/100*s,height:"8",fill:"#9ebbff",rx:"7"}),(0,D.jsx)("circle",{cx:Math.min(Math.max(t/100*s,7),s-7),cy:"10",r:"7",fill:"#ffffff",stroke:"#407bff",strokeWidth:"1"})]})},R=function(){var e=(0,o.useState)(!1),t=(0,r.Z)(e,2),a=t[0],n=t[1],l=(0,N.I0)(),_=localStorage.getItem("persist:auth"),j=(0,N.v9)(A);(0,o.useEffect)((function(){l((0,S.BT)())}),[l]);var g=(0,N.v9)(T.S8),b=((null===g||void 0===g?void 0:g.data)||{}).daylyNorm;(0,o.useEffect)((function(){_&&l((0,Z.Jt)())}),[l,_]);var w=j.reduce((function(e,t){return e+t.amount}),0),M=Math.min(w/b*100,100),k=function(){var e=(0,s.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(!1),!_){e.next=10;break}return e.prev=2,e.next=5,l((0,Z.Jt)());case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Error fetching water records",e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(){return e.apply(this,arguments)}}();return(0,D.jsxs)("div",{className:c,children:[(0,D.jsx)(B,{}),(0,D.jsx)("div",{className:d}),(0,D.jsxs)("div",{className:y,children:[(0,D.jsxs)("div",{className:u,children:[(0,D.jsx)("span",{className:m,children:"Today"}),(0,D.jsx)(F,{sliderValue:M}),(0,D.jsx)("div",{className:h,children:[0,50,100].map((function(e,t){return(0,D.jsxs)("div",{className:f,children:[(0,D.jsx)("div",{className:p}),(0,D.jsxs)("span",{children:[e,"%"]})]},t)}))})]}),(0,D.jsxs)("button",{className:v,onClick:function(){n(!0)},children:[(0,D.jsx)("svg",{className:x,width:"20",height:"20",children:(0,D.jsx)("use",{href:"./images_auth/vectorbtn.svg#icon-vector-btn"})}),"Add Water"]}),a&&(0,D.jsx)(I,{setModalVisible:n,onClose:k})]})]})},G={todayWaterListSection:"TodayWaterList_todayWaterListSection__tsQ3J",title:"TodayWaterList_title__1N7Qm",list:"TodayWaterList_list__pz4ad",listItem:"TodayWaterList_listItem__Nh9Nv",info:"TodayWaterList_info__RbyUS",amount:"TodayWaterList_amount__d+vnD",amountIcon:"TodayWaterList_amountIcon__+6tGu",time:"TodayWaterList_time__4fofH",actions:"TodayWaterList_actions__cBHzi",editButton:"TodayWaterList_editButton__XlLch",deleteButton:"TodayWaterList_deleteButton__M0gAj",addButton:"TodayWaterList_addButton__gMK19",twbtni:"TodayWaterList_twbtni__EiBtO"},H="EditWaterModal_modal__GhXVO",P="EditWaterModal_modalContent__tX-md",V="EditWaterModal_modalHeader__LghY1",J="EditWaterModal_modalTitle__K7jh2",O="EditWaterModal_closeButton__3y7Bl",z="EditWaterModal_iconClose__cdKlg",Y="EditWaterModal_modalBody__dE70S",X="EditWaterModal_buttonChange__rVTqz",U="EditWaterModal_amountSelector__bl-wx",K="EditWaterModal_amountSelectorSpan__5w4FC",q="EditWaterModal_inputSaveContainer__9gqFA",Q="EditWaterModal_inputText__CAfgU",$="EditWaterModal_labelDistance__kLqa8",ee="EditWaterModal_labelDistanceText__BdCZ5",te="EditWaterModal_saveButton__SZbM8",ae="EditWaterModal_waterEntry__N7YWl",ne="EditWaterModal_waterAmount__OqrrT",re="EditWaterModal_waterTime__noB83",oe="EditWaterModal_inputField__aLJJf",se=function(e){var t=e.setModalVisible,a=e.waterRecord,n=(0,o.useState)(a?a.amount:0),l=(0,r.Z)(n,2),c=l[0],d=l[1],u=(0,o.useState)(""),m=(0,r.Z)(u,2),_=m[0],h=m[1],f=(0,o.useState)(!0),p=(0,r.Z)(f,2),v=p[0],x=p[1],y=(0,o.useRef)(null),j=(0,N.I0)(),g=(0,N.v9)(A);(0,o.useEffect)((function(){var e=function(){var e=(0,s.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j((0,Z.Jt)());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),S()}),[j]),(0,o.useEffect)((function(){if(a){var e=new Date(a.date),t=e.getHours(),n=e.getMinutes().toString().padStart(2,"0"),r=t>=12?"PM":"AM",o=(t%12||12).toString().padStart(2,"0");h("".concat(o,":").concat(n," ").concat(r))}}),[g,a]),(0,o.useEffect)((function(){var e=function(e){"Escape"===e.key&&t(!1)};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[t]);var b=function(){t(!1)},w=function(e){d((function(t){return Math.max(0,t+e)}))},M=function(){var e=(0,s.Z)(i().mark((function e(){var n,o,s,l,d,u,m,_,h,f,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v){e.next=3;break}return alert("Please enter a valid amount"),e.abrupt("return");case 3:if(!a||!a._id){e.next=26;break}return e.prev=4,n=document.getElementById("time"),o=n.value,s=o.split(":"),l=(0,r.Z)(s,2),d=l[0],u=l[1],m=o.includes("PM")?"PM":"AM",_=parseInt(d,10),"PM"===m&&12!==_?_+=12:"AM"===m&&12===_&&(_=0),(h=new Date).setHours(_,parseInt(u,10),0,0),h.setHours(h.getHours()+2),f=h.toISOString(),p=a._id.$oid||a._id,e.next=18,j((0,Z.yc)({recordId:p,date:f,amount:c}));case 18:return e.next=20,j((0,Z.Jt)());case 20:t(!1),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(4),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[4,23]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=document.getElementById("time");if(e){for(var t=0;t<24;t++)for(var a=0;a<60;a+=5){var n=document.createElement("option"),r=t>=12?"PM":"AM",o=(t%12||12).toString().padStart(2,"0");n.value="".concat(o,":").concat(a.toString().padStart(2,"0")," ").concat(r),n.textContent="".concat(o,":").concat(a.toString().padStart(2,"0")," ").concat(r),e.appendChild(n)}var s=new Date,l=s.getHours(),i=5*Math.floor(s.getMinutes()/5),c=l>=12?"PM":"AM",d=(l%12||12).toString().padStart(2,"0");e.value="".concat(d,":").concat(i.toString().padStart(2,"0")," ").concat(c)}};return(0,D.jsx)("div",{className:H,ref:y,onClick:function(e){y.current&&y.current===e.target&&b()},children:(0,D.jsxs)("div",{className:P,children:[(0,D.jsxs)("div",{className:V,children:[(0,D.jsx)("h2",{className:J,children:"Edit the entered amount of water"}),(0,D.jsx)("button",{className:O,onClick:b,children:(0,D.jsx)(C.Z,{name:"close",className:z})})]}),(0,D.jsxs)("div",{className:Y,children:[(0,D.jsxs)("div",{className:ae,children:[(0,D.jsx)(C.Z,{name:"glass"}),(0,D.jsxs)("span",{className:ne,children:[c," ml"]}),(0,D.jsx)("span",{className:re,children:_})]}),(0,D.jsx)("h4",{className:$,children:"Correct entered data:"}),(0,D.jsx)("label",{className:ee,htmlFor:"amount",children:"Amount of water:"}),(0,D.jsxs)("div",{className:U,children:[(0,D.jsx)("button",{className:X,onClick:function(){return w(-50)},children:"-"}),(0,D.jsxs)("span",{className:K,id:"amount",children:[c," ml"]}),(0,D.jsx)("button",{className:X,onClick:function(){return w(50)},children:"+"})]}),(0,D.jsx)("label",{className:$,htmlFor:"time",children:"Recording time:"}),(0,D.jsx)("select",{className:Q,id:"time",onChange:function(e){return h(e.target.value)}}),(0,D.jsx)("h4",{className:$,children:"Enter the value of the water used:"}),(0,D.jsx)("input",{className:Q,type:"number",id:"value",value:c,onChange:function(e){var t=e.target.value,a=/^\d*\.?\d*$/.test(t);x(a),a&&d(Number(t))},onFocus:function(e){"0"===e.target.value&&d("")},onBlur:function(e){""===e.target.value&&d(0)}}),(0,D.jsxs)("div",{className:q,children:[(0,D.jsx)("input",{className:oe,type:"text",id:"autoFillInput",readOnly:!0,value:"".concat(c," ml")}),(0,D.jsx)("button",{className:te,onClick:M,children:"Save"})]})]})]})})},le=a(1413);var ie=a.p+"static/media/sprite.2938a5482846c8085447cd6b9efdd6e9.svg",ce={header:"DaysGeneralStats_header__zJwj9",dayStatsWrap:"DaysGeneralStats_dayStatsWrap__0LXe3",fadeInDown:"DaysGeneralStats_fadeInDown__WznhC",date:"DaysGeneralStats_date__a+Vzv",daysCloseButton:"DaysGeneralStats_daysCloseButton__o4VkW",dayStatsHead:"DaysGeneralStats_dayStatsHead__tyzlH",dayStats:"DaysGeneralStats_dayStats__N8Jud",statValue:"DaysGeneralStats_statValue__mk3lR",statRow:"DaysGeneralStats_statRow__BbRbt"},de=function(e){var t=e.isStatsOpen,a=e.closeStats,n=e.selectedDay,s=e.statsPosition,l=(0,o.useState)(s),i=(0,r.Z)(l,2),c=i[0],d=i[1],u=(0,o.useState)(!1),m=(0,r.Z)(u,2),_=m[0],h=m[1],f=(0,o.useState)({x:0,y:0}),p=(0,r.Z)(f,2),v=p[0],x=p[1],y=(0,N.I0)(),j=(0,o.useRef)(null);(0,o.useEffect)((function(){y((0,S.BT)())}),[y]);var g=(0,N.v9)(T.S8),b=(null===g||void 0===g?void 0:g.data)||{},w=b.daylyNorm?b.daylyNorm/1e3:2;(0,o.useEffect)((function(){d(s)}),[s]);var M=function(){h(!1)},k=c.top,W=c.left,C={top:"".concat(k-103,"px"),left:"".concat(W+3,"px"),transform:"translate(-300%, -100%)",zIndex:10},E=(0,o.useCallback)((function(e){"Escape"===e.key&&a()}),[a]);(0,o.useEffect)((function(){return document.addEventListener("keydown",E),function(){document.removeEventListener("keydown",E)}}),[E]);var B=(0,o.useCallback)((function(e){j.current&&!j.current.contains(e.target)&&a()}),[a]);return(0,o.useEffect)((function(){return document.addEventListener("mousedown",B),function(){document.removeEventListener("mousedown",B)}}),[B]),n?(0,D.jsxs)("div",{className:"".concat(ce.dayStatsWrap," ").concat(t?ce.open:""),style:C,onMouseDown:function(e){h(!0),x({x:e.clientX,y:e.clientY})},onMouseMove:function(e){if(_){var t=e.clientX-v.x,a=e.clientY-v.y;d((function(e){return{top:e.top+a,left:e.left+t}})),x({x:e.clientX,y:e.clientY})}},onMouseUp:M,onMouseLeave:M,ref:j,children:[(0,D.jsxs)("div",{className:ce.header,children:[(0,D.jsxs)("p",{className:ce.date,children:[n.date,", ",n.month]}),(0,D.jsx)("button",{className:ce.daysCloseButton,onClick:a,children:(0,D.jsx)("svg",{width:"16px",height:"16px",stroke:"currentColor",fill:"currentColor",children:(0,D.jsx)("use",{xlinkHref:"".concat(ie,"#icon-close")})})})]}),(0,D.jsxs)("div",{className:ce.statRow,children:[(0,D.jsx)("p",{className:ce.statLabel,children:"Daily Norma:"}),(0,D.jsxs)("p",{className:ce.statValue,children:[w," L"]})]}),(0,D.jsxs)("div",{className:ce.statRow,children:[(0,D.jsx)("p",{className:ce.statLabel,children:"Fulfillment of the daily norm:"}),(0,D.jsxs)("p",{className:ce.statValue,children:[n.percentageOfGoal,"%"]})]}),(0,D.jsxs)("div",{className:ce.statRow,children:[(0,D.jsx)("p",{className:ce.statLabel,children:"How many servings of water:"}),(0,D.jsx)("p",{className:ce.statValue,children:n.recordsCount})]})]}):null},ue={monthTableWrap:"MonthStatsTable_monthTableWrap__RUvkN",paginationWrap:"MonthStatsTable_paginationWrap__DlkWe",daysList:"MonthStatsTable_daysList__uEEAv",dayItem:"MonthStatsTable_dayItem__lh8AI",dayNumber:"MonthStatsTable_dayNumber__V-WmZ","dayNumber--low":"MonthStatsTable_dayNumber--low__P9iIZ",dayPercentage:"MonthStatsTable_dayPercentage__0nKnN",monthsHead:"MonthStatsTable_monthsHead__N7CCt",monthSelector:"MonthStatsTable_monthSelector__1Igvw",monthAndYear:"MonthStatsTable_monthAndYear__Y89jc",monthBackButton:"MonthStatsTable_monthBackButton__7IEHe",monthNextButton:"MonthStatsTable_monthNextButton__aSu38"},me=a(2639);function _e(){var e=(0,o.useCallback)((function(e){return["January","February","March","April","May","June","July","August","September","October","November","December"][e]}),[]),t=(0,o.useState)(!1),a=(0,r.Z)(t,2),n=a[0],s=a[1],l=(0,o.useState)(null),i=(0,r.Z)(l,2),c=i[0],d=i[1],u=(0,o.useState)([]),m=(0,r.Z)(u,2),_=m[0],h=m[1],f=localStorage.getItem("persist:auth"),p=(0,o.useState)(!1),v=(0,r.Z)(p,2),x=v[0],y=v[1],j=(0,o.useState)({top:0,right:0}),g=(0,r.Z)(j,2),b=g[0],w=g[1],M=(0,o.useState)({currentMonthIndex:(new Date).getMonth(),currentYear:(new Date).getFullYear(),currentDate:(new Date).getDate()}),S=(0,r.Z)(M,1)[0],k=S.currentMonthIndex,W=S.currentYear,C=S.currentDate,E=(0,o.useState)(k),T=(0,r.Z)(E,2),B=T[0],L=T[1],I=(0,o.useState)(W),A=(0,r.Z)(I,2),F=A[0],R=A[1],G=(0,o.useMemo)((function(){return e(B)}),[B,e]),H=(0,o.useMemo)((function(){return Array.from({length:new Date(F,B+1,0).getDate()},(function(e,t){return{month:G,date:t+1,percentageOfGoal:0,recordsCount:0}}))}),[B,F,G]),P=function(e){var t=(B+e+12)%12;R(11===t&&-1===e?F-1:0===t&&1===e?F+1:F),L(t)},V=(0,N.I0)();(0,o.useEffect)((function(){if(f){y(!0);var e=G;V((0,Z.D6)({monthName:e,year:F,accessToken:f})).unwrap().then((function(e){if(e&&Array.isArray(e.data)){var t=e.data.reduce((function(e,t){var a=function(e){if(!e||"string"!==typeof e)return null;var t=e.split(", "),a=(0,r.Z)(t,2),n=a[0],o=a[1];if(!n||!o)return null;var s=["January","February","March","April","May","June","July","August","September","October","November","December"].indexOf(o.trim());if(-1===s)return null;var l=parseInt(n.trim());return isNaN(l)?null:new Date((new Date).getFullYear(),s,l)}(t.date);a&&(e[a.toISOString().split("T")[0]]={percentageOfGoal:parseInt(t.percentageOfGoal)||0,recordsCount:t.recordsCount||0});return e}),{}),a=H.map((function(e){var a=new Date(F,B,e.date).toISOString().split("T")[0],n=t[a];return n?(0,le.Z)((0,le.Z)({},e),{},{percentageOfGoal:n.percentageOfGoal,recordsCount:n.recordsCount}):e}));h(a)}})).catch((function(e){console.error("Error fetching data:",e)})).finally((function(){y(!1)}))}}),[f,B,F,V,H,G]);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("div",{className:ue.paginationWrap,children:[(0,D.jsx)("h2",{className:ue.monthsHead,children:"Month"}),(0,D.jsxs)("div",{className:ue.monthSelector,children:[(0,D.jsx)("button",{className:"".concat(ue.monthButton," ").concat(ue.monthBackButton),onClick:function(){return P(-1)},children:(0,D.jsx)("svg",{width:"14px",height:"14px",children:(0,D.jsx)("use",{href:"".concat(ie,"#icon-chevron-double-up")})})}),(0,D.jsxs)("p",{className:ue.monthAndYear,children:[G,", ",F]}),(0,D.jsx)("button",{className:"".concat(ue.monthButton," ").concat(ue.monthNextButton),onClick:function(){return P(1)},disabled:B===k&&F===W,children:(0,D.jsx)("svg",{width:"14px",height:"14px",children:(0,D.jsx)("use",{href:"".concat(ie,"#icon-chevron-double-up")})})})]})]}),x?(0,D.jsx)(me.Z,{}):(0,D.jsx)("ul",{className:ue.daysList,children:null===_||void 0===_?void 0:_.map((function(e){var t,a=e.date===C&&k===B;return(0,D.jsxs)("li",{className:ue.dayItem,children:[(0,D.jsx)("p",{id:"day-number",onClick:function(t){return function(e,t){var a=t.currentTarget.getBoundingClientRect(),n=a.left>window.innerWidth/2;w({top:a.top+window.scrollY-10,left:n?a.left-200:a.left}),d(e),s(!0)}(e,t)},className:"".concat(ue.dayNumber," ").concat(ue["dayNumber--".concat((t=e.percentageOfGoal,0===t?"neutral":t<100?"low":"high"))]," ").concat(a&&e.percentageOfGoal>0?ue.dayNumberSelected:""),children:e.date}),(0,D.jsx)("p",{className:ue.dayPercentage,children:e.percentageOfGoal?"".concat(e.percentageOfGoal+"%"):"-"})]},e.date)}))}),n&&(0,D.jsx)(de,{closeStats:function(){s(!1),d(null)},isOpen:n,selectedDay:c,statsPosition:b})]})}var he="DeleteWaterModal_backdrop__+akGu",fe="DeleteWaterModal_deleteModal__h9C5o",pe="DeleteWaterModal_deleteModal__container__K02sK",ve="DeleteWaterModal_deleteModal__header__o2Zkg",xe="DeleteWaterModal_deleteModal__title__8kfTA",ye="DeleteWaterModal_deleteModal__ques__l4h-Z",Ne="DeleteWaterModal_deleteModal__close__8VqmZ",je="DeleteWaterModal_deleteModal__close_icon__XrJP9",ge="DeleteWaterModal_deleteModal__delete__++SEX",be="DeleteWaterModal_deleteModal__cancel__GVcyS",we="DeleteWaterModal_deleteModal__btnsWrap__-L8-N",Me="DeleteWaterModal_deleteModal__actions__aog75",Se=function(e){var t=e.record,a=e.closeModal,n=e.closeBackdrop,r=e.onSave,o=(0,N.I0)(),l=function(){var e=(0,s.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t._id){e.next=3;break}return console.error("No record provided for deletion"),e.abrupt("return");case 3:return e.prev=3,e.next=6,o((0,Z.e4)(t._id));case 6:if("fulfilled"!==e.sent.meta.requestStatus){e.next=14;break}if(!r){e.next=11;break}return e.next=11,r();case 11:a(),e.next=15;break;case 14:console.error("Failed to delete water record");case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),console.error("Error during deletion:",e.t0);case 20:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(){return e.apply(this,arguments)}}();return(0,D.jsx)("div",{className:he,onClick:function(e){return e.target===e.currentTarget&&n()},children:(0,D.jsx)("section",{className:fe,children:(0,D.jsxs)("div",{className:pe,children:[(0,D.jsxs)("div",{className:ve,children:[(0,D.jsx)("h2",{className:xe,children:"Delete entry"}),(0,D.jsx)("button",{className:Ne,onClick:a,children:(0,D.jsx)(C.Z,{name:"close",className:je})})]}),(0,D.jsxs)("div",{className:Me,children:[(0,D.jsxs)("p",{className:ye,children:["Are you sure you want to delete the entry of ",t.amount," ml recorded at ",new Date(t.date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),"?"]}),(0,D.jsxs)("div",{className:we,children:[(0,D.jsx)("button",{type:"button",className:ge,onClick:l,children:"Delete"}),(0,D.jsx)("button",{type:"button",className:be,onClick:a,children:"Cancel"})]})]})]})})})},ke=function(){var e=(0,o.useState)(!1),t=(0,r.Z)(e,2),a=t[0],n=t[1],l=(0,o.useState)(!1),c=(0,r.Z)(l,2),d=c[0],u=c[1],m=(0,o.useState)(!1),_=(0,r.Z)(m,2),h=_[0],f=_[1],p=(0,N.I0)(),v=localStorage.getItem("persist:auth"),x=(0,o.useState)(null),y=(0,r.Z)(x,2),j=y[0],g=y[1],b=(0,o.useRef)(null),w=(0,N.v9)(A);(0,o.useEffect)((function(){v&&(p((0,Z.Jt)()),p((0,Z.D6)()))}),[p,v]),(0,o.useEffect)((function(){b.current&&(b.current.scrollTop=b.current.scrollHeight)}),[w]);var M=function(){var e=(0,s.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(!1),!v){e.next=12;break}return e.prev=2,e.next=5,p((0,Z.Jt)());case 5:return e.next=7,p((0,Z.D6)());case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Error adding water record",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,s.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p((0,Z.yc)(t));case 3:return e.next=5,p((0,Z.Jt)());case 5:return e.next=7,p((0,Z.D6)());case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error updating water record",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=(0,s.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p((0,Z.Jt)());case 3:return e.next=5,p((0,Z.D6)());case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error deleting water record",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return(0,D.jsxs)("section",{className:G.todayWaterListSection,children:[(0,D.jsx)("h2",{className:G.title,children:"Today"}),(0,D.jsx)("ul",{className:G.list,ref:b,children:w.map((function(e){var t=e._id,a=e.amount,n=e.date;return(0,D.jsxs)("li",{className:G.listItem,children:[(0,D.jsxs)("div",{className:G.info,children:[(0,D.jsxs)("span",{className:G.amount,children:[(0,D.jsx)("svg",{className:G.amountIcon,children:(0,D.jsx)("use",{href:"./images_auth/today_water.svg#icon-today_water"})}),a," ml"]}),(0,D.jsx)("span",{className:G.time,children:new Date(n).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]}),(0,D.jsxs)("div",{className:G.actions,children:[(0,D.jsx)("button",{className:G.editButton,onClick:function(){return function(e){var t=w.find((function(t){return t._id===e}));g(t),u(!0)}(t)},"aria-label":"Edit",children:(0,D.jsx)("svg",{width:"16",height:"16",children:(0,D.jsx)("use",{href:"./images_auth/td_editdelet.svg#icon-edit"})})}),(0,D.jsx)("button",{className:G.deleteButton,onClick:function(){return function(e){var t=w.find((function(t){return t._id===e}));g(t),f(!0)}(t)},"aria-label":"Delete",children:(0,D.jsx)("svg",{width:"16",height:"16",children:(0,D.jsx)("use",{href:"./images_auth/td_editdelet.svg#icon-delete"})})})]})]},t)}))}),(0,D.jsx)("button",{className:G.addButton,onClick:function(){n(!0)},children:"+ Add water"}),a&&(0,D.jsx)(I,{setModalVisible:n,onClose:M}),d&&j&&(0,D.jsx)(se,{setModalVisible:u,waterRecord:j,onSave:S}),h&&j&&(0,D.jsx)(Se,{record:j,closeModal:function(){return f(!1)},closeBackdrop:function(){return f(!1)},onSave:k}),(0,D.jsx)("section",{className:G.MonthStatsTableSection,children:(0,D.jsx)(_e,{})})]})},We="HomePage_homeContainer__6ghGM",Ce="HomePage_waterTrackerSection__tdyHv",De="HomePage_homeSectionsWrapper__tR7W2",Ee=function(){var e=(0,o.useState)(0),t=(0,r.Z)(e,2),a=t[0],s=t[1],l=(0,o.useState)([]),i=(0,r.Z)(l,2),c=i[0],d=i[1];return(0,D.jsx)("div",{className:We,children:(0,D.jsxs)("div",{className:De,children:[(0,D.jsx)("section",{className:Ce,children:(0,D.jsx)(R,{sliderValue:a,onSliderChange:function(e){s(e)},onAddWaterClick:function(){var e={id:Date.now().toString(),amount:200,time:(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};d((function(t){return[].concat((0,n.Z)(t),[e])})),s((function(e){return Math.min(e+10,100)}))}})}),(0,D.jsx)(ke,{waterRecords:c,onEdit:function(e){console.log("Edit record with ID:",e)},onDelete:function(e){d((function(t){return t.filter((function(t){return t.id!==e}))}))}})]})})}}}]);
//# sourceMappingURL=818.84374c75.chunk.js.map