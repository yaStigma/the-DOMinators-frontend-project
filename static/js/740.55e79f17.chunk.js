"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[740],{740:function(e,t,a){a.r(t),a.d(t,{default:function(){return z}});var r=a(3433),n=a(9439),s=a(2791),i="WaterRatioPanel_dailyNormaSection__lejGd",o="WaterRatioPanel_imageContainer__JcPUd",l="WaterRatioPanel_progressContainer__f0Qbe",c="WaterRatioPanel_progressTitle__Z-RzH",u="WaterRatioPanel_progressBar__dShpn",d="WaterRatioPanel_progressMarkers__+UN4R",m="WaterRatioPanel_marker__m+8sw",h="WaterRatioPanel_tick__Gwmie",_="WaterRatioPanel_addWaterBtn__mfzkw",p="WaterRatioPanel_icon__ZAI64",f="WaterRatioPanel_bottomSection__pH0C5",x="DailyNorma_dailyNormaContainer__KHUio",v="DailyNorma_title__X4SZH",g="DailyNorma_normaContainer__yAGrT",j="DailyNorma_normaValue__Gd29x",N="DailyNorma_editButton__Zko6d",y=a(5861),w=a(7757),b=a.n(w),W=a(4420),k=a(3016),S=a(7520),T=a(2564);k.Z.defaults.baseURL="https://the-dominators-back-project.onrender.com";var C=function(e){k.Z.defaults.headers.common.Authorization="Bearer ".concat(e)},D=(0,S.hg)("user/water-rate",function(){var e=(0,y.Z)(b().mark((function e(t,a){var r,n,s,i,o,l,c;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.accessToken,n=t.dailyNorma,e.prev=1,C(r),e.next=5,k.Z.patch("/users/water-rate",{daylyNorm:n});case 5:return s=e.sent,T.Am.success(s.data.message,{duration:4e3,position:"top-right"}),e.abrupt("return",s.data);case 10:if(e.prev=10,e.t0=e.catch(1),!e.t0.response){e.next=16;break}return i=e.t0.response.data,o=i.status,l=i.message,c=i.data,T.Am.error("Error: ".concat(l),{duration:4e3,position:"top-right"}),e.abrupt("return",a.rejectWithValue({status:o,message:l,data:c}));case 16:return T.Am.error("Error: ".concat(e.t0.message),{duration:4e3,position:"top-right"}),e.abrupt("return",a.rejectWithValue({status:null,message:e.t0.message,data:null}));case 18:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a){return e.apply(this,arguments)}}()),L=((0,S.hg)("water/createRecord",function(){var e=(0,y.Z)(b().mark((function e(t,a){var r,n,s,i,o,l,c,u;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.accessToken,n=t.amount,s=t.time,e.prev=1,C(r),e.next=5,k.Z.post("/water",{amount:n,date:(new Date).toISOString().split("T")[0]+"T"+s+":00Z"});case 5:return i=e.sent,T.Am.success(i.data.message,{duration:4e3,position:"top-right"}),e.abrupt("return",i.data);case 10:if(e.prev=10,e.t0=e.catch(1),!e.t0.response){e.next=16;break}return o=e.t0.response.data,l=o.status,c=o.message,u=o.data,T.Am.error("Error: ".concat(c),{duration:4e3,position:"top-right"}),e.abrupt("return",a.rejectWithValue({status:l,message:c,data:u}));case 16:return T.Am.error("Error: ".concat(e.t0.message),{duration:4e3,position:"top-right"}),e.abrupt("return",a.rejectWithValue({status:null,message:e.t0.message,data:null}));case 18:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a){return e.apply(this,arguments)}}()),{modal:"DailyNormaModal_modal__vJ3oF",modalContent:"DailyNormaModal_modalContent__KvIF8",navnButton:"DailyNormaModal_navnButton__YziaA",closeButton:"DailyNormaModal_closeButton__Uur27",formulas:"DailyNormaModal_formulas__wR-gI",label:"DailyNormaModal_label__FhZVe",formula:"DailyNormaModal_formula__LLd2F",radioGroup:"DailyNormaModal_radioGroup__hW-rO","radio-label":"DailyNormaModal_radio-label__j1hG2",labelInput:"DailyNormaModal_labelInput__zcUdV",inputWrapper:"DailyNormaModal_inputWrapper__yjnEa",bluInput:"DailyNormaModal_bluInput__QSMvJ","modal-content":"DailyNormaModal_modal-content__TsjF1","radio-group":"DailyNormaModal_radio-group__CV3cj",blu:"DailyNormaModal_blu__S7if2"}),M=a(184),B=function(e){var t=e.setModalVisible,a=(0,s.useState)("woman"),r=(0,n.Z)(a,2),i=r[0],o=r[1],l=(0,s.useState)(0),c=(0,n.Z)(l,2),u=c[0],d=c[1],m=(0,s.useState)(0),h=(0,n.Z)(m,2),_=h[0],p=h[1],f=(0,s.useState)("0 L"),x=(0,n.Z)(f,2),v=x[0],g=x[1],j=(0,s.useState)(0),N=(0,n.Z)(j,2),w=N[0],k=N[1],S=(0,W.I0)();(0,s.useEffect)((function(){return T(),window.addEventListener("resize",T),function(){return window.removeEventListener("resize",T)}}),[]);var T=function(){var e=document.getElementById("infoText");e.style.height="auto",e.style.height=e.scrollHeight+"px"},C=(0,s.useCallback)((function(){var e;"woman"===i?e=.03*u+.4*_:"man"===i&&(e=.04*u+.6*_),isNaN(e)&&(e=0),g(0===e?"0 L":e.toFixed(2)+" L")}),[i,u,_]);(0,s.useEffect)((function(){C()}),[C]);var B=function(e){"0"===e.target.value&&(e.target.value="")},Z=function(e){""===e.target.value&&(e.target.value="0")},R=function(){var e=(0,y.Z)(b().mark((function e(a){var r,n,s,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),!((r=1e3*w)>5e3)){e.next=5;break}return alert("\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0441\u0443\u0442\u043e\u0447\u043d\u0430\u044f \u043d\u043e\u0440\u043c\u0430 \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u044f \u0432\u043e\u0434\u044b - 5000 \u043c\u043b"),e.abrupt("return");case 5:return n=JSON.parse(localStorage.getItem("persist:auth")),s=n.accessToken.replace(/"/g,""),e.next=9,S(D({accessToken:s,dailyNorma:r}));case 9:(i=e.sent).error?alert("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(i.error.message)):t(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,M.jsx)("div",{className:L.App,children:(0,M.jsx)("div",{className:L.modal,children:(0,M.jsxs)("div",{className:L.modalContent,children:[(0,M.jsxs)("div",{className:L.navnButton,children:[(0,M.jsx)("h2",{children:"My daily norma"}),(0,M.jsx)("button",{className:L.closeButton,onClick:function(){return t(!1)},children:"\xd7"})]}),(0,M.jsxs)("div",{className:L.formulas,children:[(0,M.jsxs)("p",{children:[(0,M.jsx)("span",{className:L.label,children:"For girl:"}),(0,M.jsx)("span",{className:L.formula,children:"V=(M*0.03) + (T*0.4)"})]}),(0,M.jsxs)("p",{children:[(0,M.jsx)("span",{className:L.label,children:"For man:"}),(0,M.jsx)("span",{className:L.formula,children:"V=(M*0.04) + (T*0.6)"})]})]}),(0,M.jsx)("textarea",{id:"infoText",readOnly:!0,className:L.textarea,value:"* V is the volume of the water norm in liters per day, M is your body weight, T is the time of active sports, or another type of activity commensurate in terms of loads (in the absence of these, you must set 0)"}),(0,M.jsxs)("form",{onSubmit:R,children:[(0,M.jsx)("h4",{children:"Calculate your rate:"}),(0,M.jsxs)("div",{className:L.radioGroup,children:[(0,M.jsxs)("label",{className:L.radioLabel,children:[(0,M.jsx)("input",{type:"radio",name:"gender",value:"woman",checked:"woman"===i,onChange:function(){return o("woman")}})," For woman"]}),(0,M.jsxs)("label",{className:L.radioLabel,children:[(0,M.jsx)("input",{type:"radio",name:"gender",value:"man",checked:"man"===i,onChange:function(){return o("man")}})," For man"]})]}),(0,M.jsxs)("div",{className:L.inputWrapper,children:[(0,M.jsx)("label",{className:L.labelInput,htmlFor:"weight",children:"Your weight in kilograms:"}),(0,M.jsx)("input",{className:L.bluInput,type:"number",id:"weight",name:"weight",value:u,onChange:function(e){return d(parseFloat(e.target.value))},onFocus:B,onBlur:Z})]}),(0,M.jsxs)("div",{className:L.inputWrapper,children:[(0,M.jsx)("label",{className:L.labelInput,htmlFor:"activity-time",children:"The time of active participation in sports or other activities with a high physical load in hours:"}),(0,M.jsx)("input",{className:L.bluInput,type:"number",id:"activity-time",name:"activity-time",value:_,onChange:function(e){return p(parseFloat(e.target.value))},onFocus:B,onBlur:Z})]}),(0,M.jsx)("div",{children:(0,M.jsxs)("p",{children:[(0,M.jsx)("span",{children:"The required amount of water in liters per day:"}),(0,M.jsx)("span",{className:"".concat(L.blu," ").concat(L.requiredWater),children:v})]})}),(0,M.jsx)("h4",{children:"Write down how much water you will drink:"}),(0,M.jsx)("div",{className:L.inputWrapper,children:(0,M.jsx)("input",{className:L.bluInput,type:"number",id:"water-intake",name:"water-intake",value:w,onChange:function(e){return k(parseFloat(e.target.value))},onFocus:B,onBlur:Z})}),(0,M.jsx)("button",{type:"submit",className:L.saveButton,children:"Save"})]})]})})})},Z=function(){var e=(0,s.useState)(!1),t=(0,n.Z)(e,2),a=t[0],r=t[1],i=(0,s.useState)(2),o=(0,n.Z)(i,1)[0];return(0,M.jsxs)("div",{className:x,children:[(0,M.jsx)("p",{className:v,children:"My daily norma"}),(0,M.jsxs)("div",{className:g,children:[(0,M.jsxs)("span",{className:j,children:[o," L"]}),(0,M.jsx)("button",{onClick:function(){r(!0)},className:N,children:"Edit"})," "]}),a&&(0,M.jsx)(B,{setModalVisible:r})," "]})},R=function(e){var t=e.sliderValue,a=(0,s.useState)(256),r=(0,n.Z)(a,2),i=r[0],o=r[1];return(0,s.useEffect)((function(){var e=function(){window.innerWidth>=1440?o(350):window.innerWidth>=768?o(325):o(256)};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),(0,M.jsxs)("svg",{className:u,width:"100%",height:"20",viewBox:"0 0 ".concat(i," 20"),children:[(0,M.jsx)("rect",{x:"0",y:"6",width:i,height:"8",fill:"#d7e3ff",rx:"7"}),(0,M.jsx)("rect",{x:"0",y:"6",width:t/100*i,height:"8",fill:"#9ebbff",rx:"7"}),(0,M.jsx)("circle",{cx:Math.min(Math.max(t/100*i,7),i-7),cy:"10",r:"7",fill:"#ffffff",stroke:"#407bff",strokeWidth:"1"})]})},I=function(e){var t=e.sliderValue,a=e.onAddWaterClick;return(0,M.jsxs)("div",{className:i,children:[(0,M.jsx)(Z,{}),(0,M.jsx)("div",{className:o}),(0,M.jsxs)("div",{className:f,children:[(0,M.jsxs)("div",{className:l,children:[(0,M.jsx)("span",{className:c,children:"Today"}),(0,M.jsx)(R,{sliderValue:t}),(0,M.jsx)("div",{className:d,children:[0,50,100].map((function(e,a){var r=t===e?16:12;return(0,M.jsxs)("div",{className:m,children:[(0,M.jsx)("div",{className:h}),(0,M.jsxs)("span",{style:{fontSize:"".concat(r,"px")},children:[e,"%"]})]},a)}))})]}),(0,M.jsxs)("button",{className:_,onClick:a,children:[(0,M.jsx)("svg",{className:p,width:"20",height:"20",children:(0,M.jsx)("use",{href:"images_auth/vectorbtn.svg#icon-vector-btn"})}),"Add Water"]})]})]})},E={todayWaterListSection:"TodayWaterList_todayWaterListSection__tsQ3J",title:"TodayWaterList_title__1N7Qm",list:"TodayWaterList_list__pz4ad",listItem:"TodayWaterList_listItem__Nh9Nv",info:"TodayWaterList_info__RbyUS",amount:"TodayWaterList_amount__d+vnD",time:"TodayWaterList_time__4fofH",actions:"TodayWaterList_actions__cBHzi",editButton:"TodayWaterList_editButton__XlLch",addButton:"TodayWaterList_addButton__gMK19"},F=function(e){var t=e.waterRecords,a=e.onEdit,r=e.onDelete,n=(0,s.useRef)(null);return(0,s.useEffect)((function(){n.current&&(n.current.scrollTop=n.current.scrollHeight)}),[t]),(0,M.jsxs)("section",{className:E.todayWaterListSection,children:[(0,M.jsx)("h2",{className:E.title,children:"Today"}),(0,M.jsx)("ul",{className:E.list,ref:n,children:t.map((function(e){var t=e.id,n=e.amount,s=e.time;return(0,M.jsxs)("li",{className:E.listItem,children:[(0,M.jsxs)("div",{className:E.info,children:[(0,M.jsxs)("span",{className:E.amount,children:[" ",(0,M.jsx)("svg",{width:"26",height:"26",children:(0,M.jsx)("use",{href:"./images_auth/today_water.svg#icon-today_water"})}),n," ml"]}),(0,M.jsx)("span",{className:E.time,children:s})]}),(0,M.jsxs)("div",{className:E.actions,children:[(0,M.jsx)("button",{className:E.editButton,onClick:function(){return a(t)},"aria-label":"Edit",children:(0,M.jsx)("svg",{width:"16",height:"16",children:(0,M.jsx)("use",{href:"./images_auth/pendelete.svg#icon-pencil"})})}),(0,M.jsx)("button",{className:E.deleteButton,onClick:function(){return r(t)},"aria-label":"Delete",children:(0,M.jsx)("svg",{width:"16",height:"16",children:(0,M.jsx)("use",{href:"./images_auth/pendelete.svg#icon-delete"})})})]})]},t)}))}),(0,M.jsx)("button",{className:E.addButton,onClick:function(){return a(null)},children:"+ Add water"})]})},V="HomePage_homeContainer__6ghGM",A="HomePage_waterTrackerSection__tdyHv",P="HomePage_todayWaterListSection__Rz2pC",z=function(){var e=(0,s.useState)(0),t=(0,n.Z)(e,2),a=t[0],i=t[1],o=(0,s.useState)([]),l=(0,n.Z)(o,2),c=l[0],u=l[1];return(0,M.jsxs)("div",{className:V,children:[(0,M.jsx)("section",{className:A,children:(0,M.jsx)(I,{sliderValue:a,onSliderChange:function(e){i(e)},onAddWaterClick:function(){var e={id:Date.now().toString(),amount:200,time:(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};u((function(t){return[].concat((0,r.Z)(t),[e])})),i((function(e){return Math.min(e+10,100)}))}})}),(0,M.jsx)("section",{className:P,children:(0,M.jsx)(F,{waterRecords:c,onEdit:function(e){console.log("Edit record with ID:",e)},onDelete:function(e){u((function(t){return t.filter((function(t){return t.id!==e}))}))}})})]})}}}]);
//# sourceMappingURL=740.55e79f17.chunk.js.map